module.exports=[31782,a=>{"use strict";var b=a.i(37936),c=a.i(18558),d=a.i(53112),e=a.i(58840),f=a.i(22028),g=a.i(13095);let h=d.z.object({fullName:d.z.string().min(3,"Please provide your full name."),title:d.z.string().min(3,"Add a clear headline for your expertise."),location:d.z.string().min(2,"Add your location."),hourlyRate:d.z.coerce.number().min(0,"Hourly rate must be positive.").optional(),bio:d.z.string().min(30,"Share more about your experience (min 30 characters)."),skills:d.z.string().transform(a=>a.split(",").map(a=>a.trim()).filter(Boolean)).pipe(d.z.array(d.z.string()).min(1,"Add at least one skill.")),website:d.z.string().optional().transform(a=>a?.length?a:void 0).refine(a=>!a||/^https?:\/\//.test(a),"Website must start with http or https.")});async function i(a,b){let d=h.safeParse({fullName:b.get("fullName"),title:b.get("title"),location:b.get("location"),hourlyRate:b.get("hourlyRate"),bio:b.get("bio"),skills:b.get("skills"),website:b.get("website")});if(!d.success)return{status:"error",message:d.error.issues[0]?.message??"Invalid profile data."};let g=await (0,e.getCurrentUser)();if(!g?.profile||"freelancer"!==g.profile.role)return{status:"error",message:"Only freelancers can update this profile."};let i=(0,e.getDB)();if(!i)return{status:"error",message:"Database not available."};try{return await i.prepare(`UPDATE profiles SET 
         full_name = ?, title = ?, location = ?, hourly_rate = ?, bio = ?, skills = ?, website = ?, updated_at = datetime('now')
         WHERE id = ?`).bind(d.data.fullName,d.data.title,d.data.location,d.data.hourlyRate??null,d.data.bio,(0,f.toJsonArray)(d.data.skills),d.data.website??null,g.profile.id).run(),(0,c.revalidatePath)("/freelancer/profile"),(0,c.revalidatePath)("/freelancer/dashboard"),{status:"success",message:"Profile updated successfully."}}catch(a){return{status:"error",message:a instanceof Error?a.message:"Failed to update profile."}}}(0,g.ensureServerEntryExports)([i]),(0,b.registerServerReference)(i,"6095f93d157cc36a9233b4a6ec275ee2f15c74ee9f",null),a.s([],2886),a.i(2886),a.s(["6095f93d157cc36a9233b4a6ec275ee2f15c74ee9f",()=>i],31782)}];

//# sourceMappingURL=_next-internal_server_app_%28dashboard%29_freelancer_profile_page_actions_3ef6b685.js.map