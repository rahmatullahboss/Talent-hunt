module.exports=[92830,a=>{"use strict";var b=a.i(37936),c=a.i(18558),d=a.i(53112),e=a.i(58840),f=a.i(22028),g=a.i(13095);let h=d.z.object({amount:d.z.coerce.number().positive("Amount must be greater than zero."),accountName:d.z.string().min(3,"Enter the account holder name."),accountNumber:d.z.string().min(6,"Enter a valid account number."),bankName:d.z.string().min(3,"Specify the bank name."),mobileWalletNumber:d.z.string().optional().transform(a=>a?.length?a:void 0)});async function i(a,b){let d=h.safeParse({amount:b.get("amount"),accountName:b.get("accountName"),accountNumber:b.get("accountNumber"),bankName:b.get("bankName"),mobileWalletNumber:b.get("mobileWalletNumber")});if(!d.success)return{status:"error",message:d.error.issues[0]?.message??"Invalid withdrawal request."};let g=await (0,e.getCurrentUser)();if(!g?.profile||"freelancer"!==g.profile.role)return{status:"error",message:"Only freelancers can request withdrawals."};let i=(0,e.getDB)();if(!i)return{status:"error",message:"Database not available."};try{let a=(0,f.generateId)();return await i.prepare(`INSERT INTO withdrawal_requests (id, freelancer_id, amount, bank_account_name, bank_account_number, bank_name, mobile_wallet_number, status)
         VALUES (?, ?, ?, ?, ?, ?, ?, 'pending')`).bind(a,g.profile.id,d.data.amount,d.data.accountName,d.data.accountNumber,d.data.bankName,d.data.mobileWalletNumber??null).run(),(0,c.revalidatePath)("/freelancer/wallet"),{status:"success",message:"Withdrawal request submitted. We will review and process it shortly."}}catch(a){return{status:"error",message:a instanceof Error?a.message:"Failed to submit withdrawal request."}}}(0,g.ensureServerEntryExports)([i]),(0,b.registerServerReference)(i,"609c6ff9f9a4d52eab4c36f35f946fcee6c574976f",null),a.s([],40681),a.i(40681),a.s(["609c6ff9f9a4d52eab4c36f35f946fcee6c574976f",()=>i],92830)}];

//# sourceMappingURL=_next-internal_server_app_%28dashboard%29_freelancer_wallet_page_actions_ccbc2ee6.js.map