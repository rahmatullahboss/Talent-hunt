module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},50645,a=>{a.n(a.i(27572))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},16349,a=>{"use strict";function b(){return{auth:{getUser:async()=>({data:{user:null},error:null}),getSession:async()=>({data:{session:null},error:null})},from:a=>({select:(a,b)=>({data:[],error:null,count:0,eq:function(a,b){return this},neq:function(a,b){return this},in:function(a,b){return this},or:function(a){return this},gte:function(a,b){return this},lte:function(a,b){return this},like:function(a,b){return this},ilike:function(a,b){return this},is:function(a,b){return this},contains:function(a,b){return this},containedBy:function(a,b){return this},order:function(a,b){return this},limit:function(a){return this},range:function(a,b){return this},overlaps:function(a,b){return this},maybeSingle:async function(){return{data:null,error:null}},single:async function(){return{data:null,error:null}},then:function(a){a({data:[],error:null,count:0})}}),insert:async a=>({data:null,error:null}),update:a=>({eq:async(a,b)=>({data:null,error:null}),match:async a=>({data:null,error:null})}),delete:()=>({eq:async(a,b)=>({data:null,error:null}),match:async a=>({data:null,error:null})}),upsert:async a=>({data:null,error:null})})}}a.i(55781),a.s(["createSupabaseServerClient",()=>b])},84997,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ContractChat() from the server but ContractChat is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/contracts/chat.tsx <module evaluation>","ContractChat");a.s(["ContractChat",0,b])},10988,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ContractChat() from the server but ContractChat is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/contracts/chat.tsx","ContractChat");a.s(["ContractChat",0,b])},83910,a=>{"use strict";a.i(84997);var b=a.i(10988);a.n(b)},73604,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call MilestonesSection() from the server but MilestonesSection is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/contracts/milestones.tsx <module evaluation>","MilestonesSection");a.s(["MilestonesSection",0,b])},65196,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call MilestonesSection() from the server but MilestonesSection is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/contracts/milestones.tsx","MilestonesSection");a.s(["MilestonesSection",0,b])},119,a=>{"use strict";a.i(73604);var b=a.i(65196);a.n(b)},69645,a=>{"use strict";var b=a.i(7997);a.i(70396);var c=a.i(73727),d=a.i(58840),e=a.i(16349),f=a.i(35330),g=a.i(19637),h=a.i(119),i=a.i(83910);async function j({params:a}){let j=await (0,d.getCurrentUser)();j?.profile||(0,c.redirect)("/signin");let k=(0,e.createSupabaseServerClient)(),{data:l}=await k.from("contracts").select(`
      id,
      status,
      notes,
      employer:profiles!contracts_employer_id_fkey ( id, full_name ),
      freelancer:profiles!contracts_freelancer_id_fkey ( id, full_name ),
      jobs ( id, title, description ),
      milestones:contract_milestones ( id, title, amount, status, due_date, deliverable_url, notes )
    `).eq("id",a.id).maybeSingle();l||(0,c.notFound)();let m=Array.isArray(l.employer)?l.employer[0]??null:l.employer??null,n=Array.isArray(l.freelancer)?l.freelancer[0]??null:l.freelancer??null,o=Array.isArray(l.jobs)?l.jobs[0]??null:l.jobs??null,p=l.milestones??[],q=o?.description&&o.description.length>160?`${o.description.slice(0,160)}...`:o?.description??"No job description provided.",r=m?.id===j.profile.id,s=n?.id===j.profile.id,t=r?"employer":s?"freelancer":"admin"===j.profile.role?"admin":null;t||(0,c.notFound)();let{data:u}=await k.from("messages").select("id, sender_id, content, created_at").eq("contract_id",l.id).order("created_at",{ascending:!0}).limit(200),v=[{id:m?.id??"",name:m?.full_name??"Employer"},{id:n?.id??"",name:n?.full_name??"Freelancer"}];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(f.Card,{className:"space-y-3 border border-card-border/70 bg-card/80 p-6",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-foreground",children:o?.title??"Contract"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:q})]}),(0,b.jsx)(g.Badge,{variant:"muted",children:l.status})]}),l.notes?(0,b.jsxs)("p",{className:"text-sm text-muted",children:["Notes: ",l.notes]}):null]}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,b.jsx)(h.MilestonesSection,{contractId:l.id,milestones:p,role:t}),(0,b.jsx)(f.Card,{className:"border border-card-border/70 bg-card/80 p-4",children:(0,b.jsx)(i.ContractChat,{contractId:l.id,currentUserId:j.profile.id,participants:v,initialMessages:u??[]})})]})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__079cc6ca._.js.map