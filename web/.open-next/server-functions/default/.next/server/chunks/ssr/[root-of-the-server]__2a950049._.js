module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},50645,a=>{a.n(a.i(27572))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},69338,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call Card() from the server but Card is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/card.tsx <module evaluation>","Card");a.s(["Card",0,b])},81338,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call Card() from the server but Card is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/card.tsx","Card");a.s(["Card",0,b])},35330,a=>{"use strict";a.i(69338);var b=a.i(81338);a.n(b)},70444,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call Badge() from the server but Badge is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/badge.tsx <module evaluation>","Badge");a.s(["Badge",0,b])},93474,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call Badge() from the server but Badge is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/badge.tsx","Badge");a.s(["Badge",0,b])},19637,a=>{"use strict";a.i(70444);var b=a.i(93474);a.n(b)},16349,a=>{"use strict";function b(){return{auth:{getUser:async()=>({data:{user:null},error:null}),getSession:async()=>({data:{session:null},error:null})},from:a=>({select:(a,b)=>({data:[],error:null,count:0,eq:function(a,b){return this},neq:function(a,b){return this},in:function(a,b){return this},or:function(a){return this},gte:function(a,b){return this},lte:function(a,b){return this},like:function(a,b){return this},ilike:function(a,b){return this},is:function(a,b){return this},contains:function(a,b){return this},containedBy:function(a,b){return this},order:function(a,b){return this},limit:function(a){return this},range:function(a,b){return this},overlaps:function(a,b){return this},maybeSingle:async function(){return{data:null,error:null}},single:async function(){return{data:null,error:null}},then:function(a){a({data:[],error:null,count:0})}}),insert:async a=>({data:null,error:null}),update:a=>({eq:async(a,b)=>({data:null,error:null}),match:async a=>({data:null,error:null})}),delete:()=>({eq:async(a,b)=>({data:null,error:null}),match:async a=>({data:null,error:null})}),upsert:async a=>({data:null,error:null})})}}a.i(55781),a.s(["createSupabaseServerClient",()=>b])},31689,a=>{a.n(a.i(88307))},44164,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call WithdrawalForm() from the server but WithdrawalForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/freelancer/wallet/withdrawal-form.tsx <module evaluation>","WithdrawalForm");a.s(["WithdrawalForm",0,b])},37847,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call WithdrawalForm() from the server but WithdrawalForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/freelancer/wallet/withdrawal-form.tsx","WithdrawalForm");a.s(["WithdrawalForm",0,b])},63788,a=>{"use strict";a.i(44164);var b=a.i(37847);a.n(b)},38003,a=>{"use strict";var b=a.i(7997);a.i(70396);var c=a.i(73727),d=a.i(58840),e=a.i(16349),f=a.i(35330),g=a.i(19637),h=a.i(63788);async function i(){let a=await (0,d.getCurrentUser)();a?.profile||(0,c.redirect)("/signin");let i=(0,e.createSupabaseServerClient)(),[{data:k},{data:l},{data:m}]=await Promise.all([i.from("wallet_transactions").select("id, type, amount, status, reference, created_at").eq("user_id",a.profile.id).order("created_at",{ascending:!1}),i.from("withdrawal_requests").select("id, amount, status, created_at").eq("freelancer_id",a.profile.id).order("created_at",{ascending:!1}),i.from("admin_settings").select("*").limit(1).maybeSingle()]),n=k??[],o=n.filter(a=>["deposit","release"].includes(a.type)&&"failed"!==a.status).reduce((a,b)=>a+Number(b.amount??0),0),p=o-n.filter(a=>"withdrawal"===a.type&&"failed"!==a.status).reduce((a,b)=>a+Number(b.amount??0),0);return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("header",{className:"space-y-2",children:[(0,b.jsx)("h1",{className:"text-3xl font-semibold text-foreground md:text-4xl",children:"Wallet & payouts"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Track payments held in escrow, released earnings, and withdrawal requests."})]}),(0,b.jsxs)("section",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[(0,b.jsx)(j,{label:"Available balance",value:`৳${p.toLocaleString()}`}),(0,b.jsx)(j,{label:"Total earnings",value:`৳${o.toLocaleString()}`}),(0,b.jsx)(j,{label:"Pending withdrawals",value:`৳${(l??[]).filter(a=>"pending"===a.status||"processing"===a.status).reduce((a,b)=>a+Number(b.amount??0),0)}`}),(0,b.jsx)(j,{label:"Requests count",value:l?.length??0})]}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1.3fr_1fr]",children:[(0,b.jsxs)(f.Card,{className:"space-y-5 border border-card-border/70 bg-card/80 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Request a withdrawal"}),(0,b.jsx)("p",{className:"text-sm text-muted",children:"Funds are processed manually within 2 business days after review. Ensure your bank details are accurate."}),(0,b.jsx)(h.WithdrawalForm,{})]}),(0,b.jsxs)(f.Card,{className:"space-y-4 border border-card-border/70 bg-card/80 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Payout instructions"}),m?(0,b.jsxs)("ul",{className:"space-y-2 text-sm text-muted",children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:"Account name:"})," ",m.bank_account_name??"Please set in admin settings"]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:"Account number:"})," ",m.bank_account_number??"—"]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:"Bank:"})," ",m.bank_name??"—"]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-medium text-foreground",children:"Mobile wallet:"})," ",m.mobile_wallet_provider??"—"," ",m.mobile_wallet_number??""]}),(0,b.jsx)("li",{className:"text-xs text-muted",children:"After submitting a withdrawal request, our finance team will confirm once funds are disbursed to your bank or mobile wallet."})]}):(0,b.jsx)("p",{className:"text-sm text-muted",children:"Admin has not configured payout details yet."})]})]}),(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Transaction history"}),0===n.length?(0,b.jsx)(f.Card,{className:"border-dashed p-6 text-sm text-muted",children:"No transactions recorded yet."}):(0,b.jsx)("div",{className:"grid gap-3",children:n.map(a=>(0,b.jsxs)(f.Card,{className:"flex flex-wrap items-center justify-between gap-3 border border-card-border/60 bg-card/80 p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-foreground capitalize",children:a.type.replace("_"," ")}),(0,b.jsx)("p",{className:"text-xs text-muted",children:new Date(a.created_at).toLocaleString()})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(g.Badge,{variant:"cleared"===a.status?"success":"pending"===a.status?"muted":"danger",children:a.status}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-foreground",children:["৳",Number(a.amount).toLocaleString()]})]})]},a.id))})]}),(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Withdrawal requests"}),l?.length?(0,b.jsx)("div",{className:"grid gap-3",children:l.map(a=>(0,b.jsxs)(f.Card,{className:"flex items-center justify-between border border-card-border/60 bg-card/80 p-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-foreground font-semibold",children:["৳",Number(a.amount).toLocaleString()]}),(0,b.jsx)("p",{className:"text-xs text-muted",children:new Date(a.created_at).toLocaleString()})]}),(0,b.jsx)(g.Badge,{variant:"completed"===a.status?"success":"pending"===a.status?"muted":"outline",children:a.status})]},a.id))}):(0,b.jsx)(f.Card,{className:"border-dashed p-6 text-sm text-muted",children:"No withdrawal requests yet."})]})]})}function j({label:a,value:c}){return(0,b.jsxs)(f.Card,{className:"space-y-2 border border-card-border/70 bg-card/80 p-4",children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted",children:a}),(0,b.jsx)("p",{className:"text-2xl font-semibold text-foreground",children:c})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2a950049._.js.map