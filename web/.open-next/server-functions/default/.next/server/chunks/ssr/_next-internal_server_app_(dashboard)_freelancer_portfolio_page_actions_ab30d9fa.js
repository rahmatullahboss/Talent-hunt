module.exports=[39709,a=>{"use strict";var b=a.i(37936),c=a.i(18558),d=a.i(53112),e=a.i(58840),f=a.i(22028),g=a.i(13095);let h=d.z.object({title:d.z.string().min(3,"Give your project a descriptive title."),description:d.z.string().min(10,"Describe the impact of your work in at least 10 characters."),externalLink:d.z.string().optional().transform(a=>a?.length?a:void 0).refine(a=>!a||/^https?:\/\//.test(a),"Provide a valid link starting with http or https."),imageUrl:d.z.string().optional().transform(a=>a?.length?a:void 0)}),i=d.z.object({id:d.z.string()});async function j(a,b){let d=h.safeParse({title:b.get("title"),description:b.get("description"),externalLink:b.get("externalLink"),imageUrl:b.get("imageUrl")});if(!d.success)return{status:"error",message:d.error.issues[0]?.message??"Invalid portfolio item."};let g=await (0,e.getCurrentUser)();if(!g?.profile||"freelancer"!==g.profile.role)return{status:"error",message:"Only freelancers can manage portfolio items."};let i=(0,e.getDB)();if(!i)return{status:"error",message:"Database not available."};try{let a=(0,f.generateId)();return await i.prepare(`INSERT INTO portfolio_items (id, profile_id, title, description, external_link, image_url)
         VALUES (?, ?, ?, ?, ?, ?)`).bind(a,g.profile.id,d.data.title,d.data.description,d.data.externalLink??null,d.data.imageUrl??null).run(),(0,c.revalidatePath)("/freelancer/portfolio"),(0,c.revalidatePath)("/freelancer/dashboard"),{status:"success",message:"Portfolio item added."}}catch(a){return{status:"error",message:a instanceof Error?a.message:"Failed to add portfolio item."}}}async function k(a,b){let d=i.safeParse({id:b.get("itemId")});if(!d.success)return{status:"error",message:"Invalid portfolio item reference."};let f=await (0,e.getCurrentUser)();if(!f?.profile||"freelancer"!==f.profile.role)return{status:"error",message:"Only freelancers can manage portfolio items."};let g=(0,e.getDB)();if(!g)return{status:"error",message:"Database not available."};try{return await g.prepare("DELETE FROM portfolio_items WHERE id = ? AND profile_id = ?").bind(d.data.id,f.profile.id).run(),(0,c.revalidatePath)("/freelancer/portfolio"),{status:"success",message:"Portfolio item removed."}}catch(a){return{status:"error",message:a instanceof Error?a.message:"Failed to delete portfolio item."}}}(0,g.ensureServerEntryExports)([j,k]),(0,b.registerServerReference)(j,"60c0866ffc64bb9be26283b57e14fb4d4bf1f65102",null),(0,b.registerServerReference)(k,"604965fff82a0dbaa9eec65491a04d5568e564b6d0",null),a.s([],73368),a.i(73368),a.s(["604965fff82a0dbaa9eec65491a04d5568e564b6d0",()=>k,"60c0866ffc64bb9be26283b57e14fb4d4bf1f65102",()=>j],39709)}];

//# sourceMappingURL=_next-internal_server_app_%28dashboard%29_freelancer_portfolio_page_actions_ab30d9fa.js.map